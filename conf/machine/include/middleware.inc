# To support layered ipk generation

DISTRO = "rdk"

RELEASE_NUM = "8.4.2.0"
MIDDLEWARE_EXTENSION = "-middleware"
MIDDLEWARE_ARCH = "${MACHINE}${MIDDLEWARE_EXTENSION}"

MW_IPK_PATH ?= "${MIDDLEWARE_ARCH}/${RELEASE_NUM}/ipks/${BUILD_VARIANT}"
MW_IPK_SERVER_PATH ?= "${RDK_ARTIFACTS_BASE_URL}/${MW_IPK_PATH}"

PACKAGE_EXTRA_ARCHS:append = " ${MIDDLEWARE_ARCH}"

IPK_FEED_URIS += " \
                ${MIDDLEWARE_ARCH}##${MW_IPK_SERVER_PATH} "

OSS_LAYER_VERSION = "4.10.0"
MIDDLEWARE_OSS = "${@get_oss_arch(d)}${MIDDLEWARE_EXTENSION}"

PACKAGE_EXTRA_ARCHS:append = "${@ '' if '${MIDDLEWARE_OSS}' == '${OSS_LAYER_ARCH}' else ' ${MIDDLEWARE_OSS}'}"

OPKG_ARCH_PRIORITY:${MIDDLEWARE_OSS} = "210"
OSS_MACHINE = "${@get_oss_machine(d)}"

MW_OSS_IPK_PATH ?= "${MIDDLEWARE_OSS}/${OSS_LAYER_VERSION}/ipks/"
MW_OSS_IPK_SERVER_PATH ?= "${RDK_ARTIFACTS_BASE_URL}/${MW_OSS_IPK_PATH}"

IPK_FEED_URIS += " \
                ${MIDDLEWARE_OSS}##${MW_OSS_IPK_SERVER_PATH} "
